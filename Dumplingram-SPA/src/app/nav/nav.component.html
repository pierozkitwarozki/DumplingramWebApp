<!-- Image and text -->
<nav id="navbar" class="navbar navbar-dark bg-light bg-custom-2">
  <a
    class="navbar-brand ml-5"
    *ngIf="!authService.loggedIn()"
    [routerLink]="'/login'"
  >
    Dumplingram
  </a>
  <a
    class="navbar-brand ml-5"
    *ngIf="authService.loggedIn()"
    [routerLink]="'/home'"
  >
    Dumplingram
  </a>
  <div *ngIf="authService.loggedIn()" class="w-20 text-center">
    <input
      id="search"
      placeholder="Wyszukaj..."
      (click)="openSearchedUsers(template)"
    />
  </div>
  <!--User info section-->
  <div *ngIf="authService.loggedIn()">
    <div class="btn-group" dropdown>
      <h1
        id="user"
        dropdownToggle
        type="button"
        class="dropdown-toggle"
        aria-controls="dropdown-animated"
      >
        Witaj {{ authService.decodedToken.unique_name | titlecase
        }}<span class="caret"></span>
      </h1>
      <ul
        id="dropdown-animated"
        *dropdownMenu
        class="dropdown-menu"
        role="menu"
        aria-labelledby="button-animated"
      >
        <li role="menuitem"><a class="dropdown-item" [routerLink]="['/edit']" >edytuj profil</a></li>
        <li role="menuitem">
          <a class="dropdown-item" (click)="logout()">wyloguj</a>
        </li>
      </ul>
    </div>
    <img
      id="avatar"
      src="{{photoUrl}}"
      alt=""
      [routerLink]="'/users/' + authService.decodedToken.nameid"
    />
  </div>
</nav>


<!--Searching for users-->
<ng-template #template>
  <div class="modal-header">
    <div class="container text-center">
      <form id="input" (ngSubmit)="loadUsers()">
        <input (keyup)="onKey($event)" placeholder="Wyszukaj..." />
      </form>
    </div>

    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="close()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div id="avatar-section" class="mb-4" *ngFor="let user of searchedUsers">
      <img
        id="follow-image"
        src="{{ user.photoUrl }}"
        alt=""
        [routerLink]="['/users/', user.id]"
        (click)="close()"
      />
      <b class="w-100"
        ><p id="name">{{ user.name }} {{ user.surname }}</p>
        @{{ user.username }}</b
      >
    </div>
  </div>
</ng-template>
