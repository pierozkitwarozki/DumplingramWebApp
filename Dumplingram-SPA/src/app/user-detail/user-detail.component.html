<div id="main-container" class="container">
  <div id="profile" class="container col">
    <div id="avatar-section">
      <img id="avatar" src="{{ user.photoUrl }}" alt="{{ user.username }}" />
      <label id="username" for="avatar">{{ user.username }}</label>
    </div>
    <div class="container w-100 mt-4 text-center">
      <p id="name">{{ user.name }} {{ user.surname }}</p>
      <p id="description">
        {{ user.description }}
      </p>
    </div>
    <hr class="solid" />
    <div class="container mt-4 w-100 text-center">
      <div class="row">
        <div class="col-sm">
          <p class="c-pointer">Posty: {{ countPhotos() }}</p>
        </div>
        <div class="col-sm">
          <p (click)="openFoloweesModal(followers)" class="c-pointer">
            {{ countFollowers() }} obserwujących
          </p>
        </div>
        <div class="col-sm">
          <p (click)="openFoloweesModal(followees)" class="c-pointer">
            Obserwowani: {{ countFollowees() }}
          </p>
        </div>
      </div>
    </div>
    <hr class="solid" />
    <div class="container mt-4 w-100 p-2 text-center">
      <div *ngIf="!isProfileMine()">
        <button
          id="follow-button"
          *ngIf="!follow"
          (click)="followUser(user.id)"
          class="btn btn-primary"
        >
          obserwuj
        </button>
        <button
          id="unfollow-button"
          *ngIf="follow"
          (click)="unfollow(user.id)"
          class="btn btn-primary"
        >
          przestań obserwować
        </button>
      </div>
    </div>
    <div class="container">
      <div class="grid">
        <div *ngFor="let photo of user.photos" class="row">
          <img id="photo" src="{{photo.url}}" alt="{{photo.description}}" (click)="openModalPhotoPreview(photoPreview, photo)" >  
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #followees>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Obserwowani: {{ countFollowees() }}</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div id="avatar-section" class="mb-4" *ngFor="let user of followeeItems">
      <img
        id="follow-image"
        src="{{ user.followee.description }}"
        alt=""
        [routerLink]="['/users/', user.followee.id]"
        (click)="modalRef.hide()"
      />
      <b class="w-100"
        ><p id="name">{{ user.followee.name }} {{ user.followee.surname }}</p>
        @{{ user.followee.username }}</b
      >
    </div>
  </div>
</ng-template>

<ng-template #followers>
  <div class="modal-header">
    <h4 class="modal-title pull-left">{{ countFollowers() }} obserwujących</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div id="avatar-section" class="mb-4" *ngFor="let user of followerItems">
      <img
        id="follow-image"
        src="{{ user.follower.description }}"
        alt=""
        [routerLink]="['/users/', user.follower.id]"
        (click)="modalRef.hide()"
      />
      <b class="w-100"
        ><p id="name">{{ user.follower.name }} {{ user.follower.surname }}</p>
        @{{ user.follower.username }}</b
      >
    </div>
  </div>
</ng-template>

<ng-template #photoPreview id="photo-preview">
  <div class="modal-body">
    <app-post-card [photo]="photo" (getLikerClicked)="closeDialog()"></app-post-card>
  </div>
</ng-template>